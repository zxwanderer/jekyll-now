<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <body>
    <!-- <div class="spinner" id='spinner'></div> -->
    <!-- <div class="emscripten" id="status">Downloading...</div> -->
    <!-- <div class="emscripten"> -->
      <!-- <progress value="0" max="100" id="progress" hidden=1></progress> -->
    <!-- </div> -->
    
    <!-- <div class="emscripten_border"> -->
      <canvas class="emscripten" id="canvas" oncontextmenu="event.preventDefault()"></canvas>
    <!-- </div> -->

    <script type='text/javascript'>
      // var statusElement = document.getElementById('status');
      // var progressElement = document.getElementById('progress');
      // var spinnerElement = document.getElementById('spinner');

      var Module = {
        preRun: [],
        postRun: [],
        onReady: function() {
          Module.requestFullScreen(true,true);
          document.querySelector("canvas").focus();
          var url="/release/cell3326.tap.zip";
          var result = Module.ccall('OpenFile', null, ['string'], [url]);

          // onReady: (function(){
      // document.querySelector("canvas").focus();
      // var url="demos/170502/sorrow.zip";
      // var result = Module.ccall('OpenFile', // name of C function
      // null, // return type
      // ['string'], // argument types
      // [url]);
    // }),

        },
        canvas: (function() {
          // var canvas = document.getElementById('canvas');
          // As a default initial behavior, pop up an alert when webgl context is lost. To make your
          // application robust, you may want to override this behavior before shipping!
          // See http://www.khronos.org/registry/webgl/specs/latest/1.0/#5.15.2
          canvas.addEventListener("webglcontextlost", function(e) { alert('WebGL context lost. You will need to reload the page.'); e.preventDefault(); }, false);
          return canvas;
        })(),
        // setStatus: function(text) { }
      };
      // Module.setStatus('Downloading...');
      // window.onerror = function(event) {
        // TODO: do not warn on ok events like simulating an infinite loop or exitStatus
        // Module.setStatus('Exception thrown, see JavaScript console');
        // spinnerElement.style.display = 'none';
        // Module.setStatus = function(text) {
          // if (text) Module.printErr('[post-exception status] ' + text);
        // };
      // };
    </script>
    <script>

          (function() {
            var memoryInitializer = 'unreal_speccy_portable.html.mem';
            if (typeof Module['locateFile'] === 'function') {
              memoryInitializer = Module['locateFile'](memoryInitializer);
            } else if (Module['memoryInitializerPrefixURL']) {
              memoryInitializer = Module['memoryInitializerPrefixURL'] + memoryInitializer;
            }
            var meminitXHR = Module['memoryInitializerRequest'] = new XMLHttpRequest();
            meminitXHR.open('GET', memoryInitializer, true);
            meminitXHR.responseType = 'arraybuffer';
            meminitXHR.send(null);
          })();

          var script = document.createElement('script');
          script.src = "unreal_speccy_portable.js";
          document.body.appendChild(script);

</script>
<a href=# onClick="Module.requestFullScreen(false,true);document.querySelector('canvas').focus();" class="btn btn-primary" role="button"><span class="glyphicon glyphicon-download" aria-hidden="true"></span>Fullscreen</a>
  </body>
</html>
